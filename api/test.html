<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TESTE API QUE LEGAL (SOCORRO)</title>
    <script>
        //post no endpoint /api/register
        async function registerUser() {
            const data = {
                username: 'testeuser1',
                email: "macaco2@gmail.com",
                password: 'seilarapaziada'
            };
        
            const response = await fetch('http://localhost/pomodoro_project/api/index.php/api/register', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            });            
            
            const result = await response.json();
            console.log('Resultado de Register:', result);
            alert('Registro: ' + result.message);
        }

        //post no endpoint /api/login
        async function loginUser() {
            const data = {
                username: 'testeuser',
                email: "macaco@gmail.com",
                password: 'seilarapaziada'
            };

            const response = await fetch('http://localhost/pomodoro_project/api/index.php/api/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            });

            const result = await response.json();
            console.log('Resultado de Login:', result);
            alert('Login: ' + result.message);
        }

        //iniciar sessão
        async function startPomodoroSession() {
            const data = {
                user_id: 1,
                subject: 'sei la rapaziada',
                duration: 25
            };

            const response = await fetch('http://localhost/pomodoro_project/api/index.php/api/pomodoro/start', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            });

            const result = await response.json();
            console.log('Resultado de iniciar pomodoro:', result);
            alert('Iniciar Pomodoro: ' + result.message);
        }

        // validar sessão
        async function validatePomodoroSession() {
            const data = {
                session_id: '12345',
                is_valid: true
            };

            const response = await fetch('http://localhost/pomodoro_project/api/index.php/api/session/validate', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            });

            const result = await response.json();
            console.log('Resultado de validar sessão:', result);
            alert('Validar sessão: ' + result.message);
        }

        // pegar o leaderboard
        async function getLeaderboard() {
            const response = await fetch('http://localhost/pomodoro_project/api/index.php/api/statistics/leaderboard', {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                }
            });

            const result = await response.json();
            console.log('Leaderboard:', result);
            alert('Leaderboard: ' + JSON.stringify(result));
        }

        // pegar metas do usuário
        async function getGoals() {
            const userId = 1; // ID do usuário
            const response = await fetch(`http://localhost/pomodoro_project/api/index.php/api/goals?user_id=${userId}`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                }
            });

            const result = await response.json();
            console.log('Goals:', result);
            alert('Goals: ' + JSON.stringify(result));
        }

        // atualizar metas do usuário
        async function updateGoals() {
            const data = {
                user_id: 1,
                goals: [
                    { name: "Estudar matemática", completed: false },
                    { name: "Ler um livro", completed: true }
                ]
            };

            const response = await fetch('http://localhost/pomodoro_project/api/index.php/api/goals/update', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(data)
            });

            const result = await response.json();
            console.log('Atualizar metas:', result);
            alert('Atualizar metas: ' + result.message);
        }

        // pegar conquistas do usuário
        async function getAchievements() {
            const userId = 1; // ID do usuário
            const response = await fetch(`http://localhost/pomodoro_project/api/index.php/api/achievements?user_id=${userId}`, {
                method: 'GET',
                headers: {
                    'Content-Type': 'application/json'
                }
            });

            const result = await response.json();
            console.log('Achievements:', result);
            alert('Achievements: ' + JSON.stringify(result));
        }
    </script>
</head>
<body>
    <h1>TESTE DA API POMODORO VOU FICAR MALUCO</h1>

    <button onclick="registerUser()">Registrar Usuário</button><br><br>
    <button onclick="loginUser()">Login</button><br><br>
    <button onclick="startPomodoroSession()">Iniciar Sessão Pomodoro</button><br><br>
    <button onclick="validatePomodoroSession()">Validar Sessão</button><br><br>
    <button onclick="getLeaderboard()">Leaderboard</button><br><br>
    <button onclick="getGoals()">Metas do Usuário</button><br><br>
    <button onclick="updateGoals()">Atualizar Metas</button><br><br>
    <button onclick="getAchievements()">Conquistas do Usuário</button><br><br>

</body>
</html>
